(function(){var t,i,r,n;r=require("data2xml"),n=require("node-Markdown"),i=r(),n=n.Markdown,t=models.Topic,exports.rss=function(r,u,f){var e;return config.rss&&u.send(404),e=t.find({},null,{limit:config.rss.maxRssItems,sort:[["create_at","desc"]]}),e=e.populate("_author"),e.exec(function(t,r){var e;return t?f():(e={_attr:{version:"2.0"},channel:{title:config.rss.title,link:config.rss.link,language:config.rss.language,description:config.rss.description,item:r.map(function(t){return{title:t.title,link:config.rss.link+"/topic/"+t._id,guid:config.rss.link+"/topic/"+t._id,description:n(t.content,!0),author:t.author.name,pubDate:t.create_at.toUTCString()}})}},u.type("xml"),u.send(i(e)))})}}).call(this)