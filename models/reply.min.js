(function(){var t,n,u,i,r;r=require("mongoose"),i=r.Schema,t=i.ObjectId,u=new i({content:{type:String},_topic:{type:t,index:!0},_author:{type:t,ref:"User"},_reply:{type:t,ref:"Reply"},create_at:{type:Date,"default":Date.now},update_at:{type:Date,"default":Date.now},content_is_html:{type:Boolean}}),n=r.model("Reply",u),n.getReplyById=function(t,i){return n.findOne({_id:t}).populate("_author").populate("_reply").exec(i)},n.getRepliesByTopicId=function(t,i){return n.find({_topic:t},[],{sort:[["created_at","asc"]]}).populate("_author").exec(i)},exports.getRepliesByAuthorId=function(t,i){return n.find({_author:t},i)},module.exports=n}).call(this)